<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="/include/head.html">
    <title>TITLE</title>
</head>
<body>
<div th:include="/include/header.html"></div>

<div data-uk-height-viewport="expand: true">
    <div class="uk-container uk-container-expand">
        <div class="uk-card uk-card-default uk-card-style">
            <div class="uk-card-header">
                <p class="uk-card-title"><i class="mdi mdi-crosshairs-gps"></i>&nbsp;&nbsp; 모집 글</p>
            </div>
            <div class="uk-card-body">
                <div class="uk-overflow-auto">
                    <div class="uk-text-right uk-margin-small uk-margin-right">
                        <button class="uk-button uk-button-primary">게시글 작성</button>
                    </div><br/>

                    <ul class="uk-subnav uk-subnav-pill">
                        <li class="uk-active" data-uk-filter-control=""><a href="#">모두 보기</a></li>
                        <li data-uk-filter-control=".ing-card"><a href="#">모집 중</a></li>
                        <li data-uk-filter-control=".end-card"><a href="#">모집 완료</a></li>
                    </ul>

                    <div data-uk-grid>
                        <div class="uk-width-1-1">
                            <div uk-slider="center: true">
                                <div class="uk-position-relative uk-visible-toggle uk-light" tabindex="-1">
                                    <div class="uk-grid uk-grid-medium uk-child-width-1-2@s uk-child-width-1-3@m uk-child-width-1-4@l uk-child-width-1-5@xl uk-grid-match js-filter uk-flex-top uk-flex-wrap-top uk-sortable">
                                        <div class="uk-card uk-card-small uk-card-default">
                                            <div class="uk-card-header">
                                                <div class="uk-grid uk-grid-small" data-uk-grid>
                                                    <div class="uk-width-expand">
                                                        <p class="uk-text-small" id="title" >프로젝트 팀원 모집합니다.</p>
                                                    </div>
                                                    <div class="uk-width-auto uk-text-right">
                                                        <button class="uk-button uk-button-small">모집중</button>
                                                        <!--                                                            <button class="uk-button uk-button-danger uk-button-small">모집완료</button>-->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="uk-card-body">
                                                <p id="content">웹 개발자 스터디 함께 하실분을 모집합니다.</p>
                                                <p class="uk-text-small" id="date">2022-03-01 ~ 2022-03-31</p>
                                            </div>
                                            <div class="uk-card-footer">
                                                <div class="uk-width-auto">
                                                    <img th:src="@{/static/image/java.png}">
                                                    <img th:src="@{/static/image/spring.png}">
                                                    <img th:src="@{/static/image/react.png}">
                                                </div>
                                            </div>
                                        </div>

                                        <div>
                                            추가
                                        </div>

                                    </div>
                                    <a class="uk-position-center-left uk-position-small uk-hidden-hover" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
                                    <a class="uk-position-center-right uk-position-small uk-hidden-hover" href="#" uk-slidenav-next uk-slider-item="next"></a>
                                </div>
                                <ul class="uk-slider-nav uk-dotnav uk-flex-center uk-margin"></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>

<script>

    let accessToken = storage.get("accessToken");
    let url = "http://localhost:8080/board/list";
    let xhr = new XMLHttpRequest();
    xhr.open('GET', url);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
    xhr.responseType = 'json';
    xhr.send();

    xhr.onreadystatechange = function () {
        if(xhr.readyState == 4 && xhr.status == 200) {
            let data = xhr.response;
            console.log(data);
            let boardTable = document.getElementById("boardTable");
            let append = "";
            for(i in data){
                append = "<tr onclick='openDetail(" + data[i].id + ")'>";
                append += "<td>" + data[i].title + "</td>";
                append += "<td>" + data[i].writerId + "</td>";
                append += "<td>" + data[i].content + "</td>";
                append += "<td>" + data[i].regdate + "</td>";
                append += "</tr>";
            }
            boardTable.innerHTML = append;
        }
    };

    function openDetail(id) {
        storage.set("contentDetail", id);
        window.location.href = "/form/chatRoom";
    }
</script>