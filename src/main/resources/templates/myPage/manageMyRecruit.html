<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="include/head.html">
    <title>TITLE</title>
</head>
<body>
<div th:include="include/header.html"></div>

<div class="uk-container-small uk-align-center">
    <div class="uk-margin-bottom">
        <span class="uk-margin-small-right" uk-icon="icon: chevron-left; ratio: 3" onclick="backPage()" style="cursor:pointer;"></span>
    </div>
    <div class="uk-card uk-card-default">
        <div class="uk-card-header uk-text-center">
            <p class="uk-text-2_5 uk-text-bold uk-margin-large-bottom">나의 지원 관리 페이지</p>
            <div class="uk-margin-large-top" data-uk-grid="true">
                <div class="uk-text-left">
                    <span class="uk-margin-small-right" uk-icon="icon: happy; ratio: 1.5"></span>
                    <span class="uk-text-1_2 uk-text-bold " >나의 요청목록을 보고 수락 또는 거절 답변을 확인할 수 있습니다.</span>
                </div>
            </div>
        </div>
        <div class="uk-card-body" id="contentBody">
            <table class="uk-table uk-table-hover uk-table-divider uk-table-responsive uk-table-middle">
                <thead class="uk-text-0_9">
                <th class="uk-width-small uk-text-nowrap">모집 포지션</th>
                <th class="uk-width-large uk-text-nowrap">설명(간단한 역할 등)</th>
                <th class="uk-width-small uk-text-nowrap">게시글 모집상태</th>
                <th class="uk-width-small uk-text-nowrap">바로가기</th>
                <th class="uk-width-large uk-text-nowrap">지원자 설명</th>
                <th class="uk-width-small uk-text-nowrap">요청 답변</th>
                </thead>
                <tbody class="uk-text-0_8" id="recruitList">
                    <tr>
                        <td>AAAAAA</td>
                        <td>BBBBBB</td>
                        <td>모집중</td>
                        <td>안녕하세요 지원합니다.</td>
                        <td>요청대기</td>
                    </tr>
                    <tr>
                        <td>AAAAAA</td>
                        <td>BBBBBB</td>
                        <td>모집중</td>
                        <td>안녕하세요 지원합니다.</td>
                        <td>요청대기</td>
                    </tr>
                </tbody>
                <!--                    <tbody id="sub1" hidden>-->
                <!--                    <tr class="uk-animation-slide-top-small" >-->
                <!--                        <td>aaaaa</td>-->
                <!--                        <td>bbbbb</td>-->
                <!--                        <td>지원중</td>-->
                <!--                        <td>안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!</td>-->
                <!--                        <td><button class="uk-button uk-button-small uk-text-nowrap">보기</button></td>-->
                <!--                        <td>-->
                <!--                            <div class="uk-margin-small-bottom">-->
                <!--                                <button class="uk-button uk-button-primary uk-button-small uk-text-nowrap">수락</button>-->
                <!--                            </div>-->
                <!--                            <div>-->
                <!--                                <button class="uk-button uk-button-danger uk-button-small uk-text-nowrap">거절</button>-->
                <!--                            </div>-->
                <!--                        </td>-->
                <!--                    </tr>-->
                <!--                    <tr class="uk-animation-slide-top-small" >-->
                <!--                        <td>aaaaa</td>-->
                <!--                        <td>bbbbb</td>-->
                <!--                        <td>지원중</td>-->
                <!--                        <td>안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!안녕하십니까!!!</td>-->
                <!--                        <td><button class="uk-button uk-button-small uk-text-nowrap">보기</button></td>-->
                <!--                        <td>-->
                <!--                            <div class="uk-margin-small-bottom">-->
                <!--                                <button class="uk-button uk-button-primary uk-button-small uk-text-nowrap">수락</button>-->
                <!--                            </div>-->
                <!--                            <div>-->
                <!--                                <button class="uk-button uk-button-danger uk-button-small uk-text-nowrap">거절</button>-->
                <!--                            </div>-->
                <!--                        </td>-->
                <!--                    </tr>-->
                <!--                    </tbody>-->
                <!--                    <tbody>-->
                <!--                    <tr class="uk-background-muted">-->
                <!--                        <td>AAAAAA</td>-->
                <!--                        <td>BBBBBB</td>-->
                <!--                        <td>모집중</td>-->
                <!--                        <td><span uk-icon="icon: triangle-down; ratio: 1.2"></span></td>-->
                <!--                        <td><span uk-icon="icon: triangle-down; ratio: 1.2"></span></td>-->
                <!--                        <td>-</td>-->
                <!--                    </tr>-->
                <!--                    <tr class="uk-animation-slide-top-small" hidden>-->
                <!--                        <td>aaaaa</td>-->
                <!--                        <td>bbbbb</td>-->
                <!--                        <td>지원중</td>-->
                <!--                        <td>안녕하십니까!!!</td>-->
                <!--                        <td><button class="uk-button uk-button-danger uk-button-small uk-text-nowrap">보기</button></td>-->
                <!--                    </tr>-->
                <!--                    </tbody>-->
                <!--                    <tbody>-->
                <!--                    <tr class="uk-background-muted">-->
                <!--                        <td>AAAAAA</td>-->
                <!--                        <td>BBBBBB</td>-->
                <!--                        <td>모집중</td>-->
                <!--                        <td><span uk-icon="icon: triangle-down; ratio: 1.2"></span></td>-->
                <!--                        <td><span uk-icon="icon: triangle-down; ratio: 1.2"></span></td>-->
                <!--                        <td>-</td>-->
                <!--                    </tr>-->
                <!--                    <tr class="uk-animation-slide-top-small" hidden>-->
                <!--                        <td>aaaaa</td>-->
                <!--                        <td>bbbbb</td>-->
                <!--                        <td>지원중</td>-->
                <!--                        <td>안녕하십니까!!!</td>-->
                <!--                        <td><button class="uk-button uk-button-danger uk-button-small uk-text-nowrap">보기</button></td>-->
                <!--                    </tr>-->
                <!--                    </tbody>-->

            </table>
        </div>
        <div class="uk-card-footer">

        </div>
    </div>
</div>
</body>

<script type="text/javascript">

    let accessToken = storage.get("accessToken");
    let userId = storage.get("userId");
    let url = api + "/my/myRecruitList/"+userId;
    let xhr = new XMLHttpRequest();
    xhr.open('GET', url);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
    xhr.responseType = 'json';
    xhr.send();

    xhr.onreadystatechange = function () {
        if(xhr.readyState == 4 && xhr.status == 200) {
            let data = xhr.response.data[0];
            console.log(data);
            appendDetail(data);
        }
        else {
        }
    };

    function appendDetail(list) {
        let recruitList = document.getElementById("recruitList");
        let tr = "";

        for (const data of list) {
            tr += makeRecruitList(data);
        }
        recruitList.innerHTML = tr;
    }

    function openDetail(id) {
        storage.set("contentDetail", id);
        window.location.href = "/form/contentDetail";
    }

    function backPage(){
        window.location.href = "/form/contentList";
    }

</script>
</html>


